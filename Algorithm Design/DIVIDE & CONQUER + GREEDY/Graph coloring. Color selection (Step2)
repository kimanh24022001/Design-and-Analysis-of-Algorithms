#include <iostream>
#include <cstring>

using namespace std;
int choose_color( int s,int v,int color[1000], int a[1000][1000] ){
int Mini=99999999;
    for (int i=0;i<v;i++){
    	if (color[i]!=-1){
             int OK = true;
            for (int j=0;j<v;j++){
                if ( a [j][s]==1 && color[j]== color[i]  && s!=j ) {
                    OK = false; 
                    break;
                }
            }
                if (OK==true)   
                {
                    if (Mini>=color[i]){
                    	Mini=color[i];
                    }
                }
       } 
    }
    if (Mini!=99999999){
    	return Mini;
    }
    int newColor=0;
    while (newColor<=16777215 ){
    	int flag=0;
    	for (int i=0;i<v;i++){
    		if (newColor==color[i]){
    			flag=1;
    		}
    	}
    	if (flag==0){
    		return newColor;
    		}
    	newColor++;
    //	break;
    }

}
int mistakColor(int i,int v,int color[1000], int a[1000][1000]){
	for (int j=0;j<v;j++){
                if ( a [j][i]==1 && color[j]== color[i] && i!=j ) {
                    return -1; 
                    break;
                }
            }
    return 1;
}
int main() {
	int v,e,n,arr[1000][1000],color[1000];
	string  c[1000],point[1000],a,b;
	cin>>v>>e>>n;
	for (int i=0;i<v;i++){
		cin>>c[i];
	}
	for (int i=0;i<v;i++){
		for (int j=0;j<v;j++){
			arr[i][j]=0;
		}
	}
	for (int j=0;j<e;j++){
		int x,y;
		cin>>a>>b;
		for (int i=0;i<v;i++){
	     	if (c[i]==a){
		        x=i;
	     	}
	     	if (c[i]==b){
		        y=i;
	     	}
           	}
        arr[x][y]=1;
        arr[y][x]=1;
	}
	for (int i=0;i<v;i++){
		cin>>color[i];
	}
	int s=0;
	for (int i=0;i<n;i++){
		cin>>point[i];
		for (int j=0;j<v;j++){
			if(point[i]==c[j]){
				s=choose_color( j,v,color,arr );
				if ((mistakColor(j,v,color,arr)==1) && ((color[j]!=-1) || color[j]==s)){
			           cout<<"TRUE"<<endl;
				  }
				else{
					cout<<s<<endl;
				}
				break;
			}
		}
	}
   
	return 0;
}
